{% extends "layout.html" %}

{% block script %}
<script>
    let lat = localStorage.getItem("lat");
    let long = localStorage.getItem("long");
</script>
{% endblock %}

{% block title %}
    Track
{% endblock %}

{% block main %}

    <form action="/track" method="post">
        <div class="form-group">
            <input id="location" autocomplete="off" autofocus class="form-control" name="location" readonly type="text">
        </div>
        <div class="form-group">
            <input class="form-control" name="nickname" placeholder="Nickname (optional)" type="text">
        </div>
        <div class="form-group">
            <input id="timestamp" class="form-control" type="text" name="timestamp" readonly hidden>
        </div>
        <button class="btn btn-dark" type="submit">Confirm Track</button>
    </form>


    <script>
        document.getElementById("location").setAttribute("value", lat + ',' + long);


        let date = new Date()
        let year = date.getFullYear();
        let month = date.getMonth() + 1;
        let day = date.getDate();
        let time = date.getHours() +":"+ date.getMinutes() +":"+ date.getSeconds()

        document.getElementById("timestamp").setAttribute("value", year + "-" + month + "-" + day + " " + time);

    </script>

{% endblock %}